@model ProyectoPanaderia.ViewModels.ResumenCompraVM
@{
    ViewData["Title"] = "Resumen de Compra";
}

<h2 class="mb-4">Resumen de Compra</h2>

<div class="card mb-4">
    <div class="card-header">
        <h5>Productos en el Pedido</h5>
    </div>
    <div class="card-body">
        <ul class="list-group list-group-flush">
            @foreach (var item in Model.Items)
            {
                <li class="list-group-item">
                    @item.Nombre (Cantidad: @item.Cantidad) - Precio Unitario: @item.PrecioUnitario.ToString("C") - Subtotal: @item.Subtotal.ToString("C")
                </li>
            }
        </ul>
        <h5 class="mt-3 text-right">Total: @Model.Total.ToString("C")</h5>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h5>Detalles de Entrega y Pago</h5>
    </div>
    <div class="card-body">
        <p><strong>Dirección de Entrega:</strong> @Model.DireccionEntrega</p>
        @if (!string.IsNullOrEmpty(Model.Referencia))
        {
            <p><strong>Referencia:</strong> @Model.Referencia</p>
        }
        <p><strong>Método de Pago:</strong> @Model.MetodoPago</p>
    </div>
</div>

<div class="form-group mt-4">
    <form asp-action="Checkout" method="get" style="display:inline;">
        <input type="hidden" asp-for="DireccionEntrega" />
        <input type="hidden" asp-for="Referencia" />
        <input type="hidden" asp-for="MetodoPago" />
        <button type="submit" class="btn btn-secondary">Regresar</button>
    </form>

    <form asp-action="FinalizarCompra" method="post" style="display:inline;">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="DireccionEntrega" />
        <input type="hidden" asp-for="Referencia" />
        <input type="hidden" asp-for="MetodoPago" />
        <button type="submit" class="btn btn-success">Finalizar Compra</button>
    </form>
</div>
